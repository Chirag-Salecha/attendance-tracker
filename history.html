<!DOCTYPE html>
<html>
<head>
<title>AttendFlow – Attendance History</title>

<style>
body{
  font-family:Segoe UI, Arial, sans-serif;
  background:#020617;
  color:#e5e7eb;
  padding:30px;
}
table{
  width:100%;
  border-collapse:collapse;
  margin-bottom:30px;
}
th,td{
  border:1px solid #334155;
  padding:10px;
  text-align:center;
}
h3{
  margin-top:40px;
}
button{
  padding:10px 18px;
  background:#22c55e;
  border:none;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}
</style>
</head>

<body>

<h2>Saved Attendance History</h2>

<div id="output"></div>

<button onclick="goBack()">⬅ Back to Entry</button>

<script>
let history = JSON.parse(localStorage.getItem("attendanceHistory")) || [];
let html = "";

if(history.length === 0){
  html = "<p>No records found.</p>";
}

history.forEach((entry, index)=>{
  html += `<h3>Record ${index+1}</h3>`;
  html += `<table>
            <tr>
              <th>Roll</th>
              ${entry.dates.map(d=>`<th>${d}</th>`).join("")}
            </tr>`;

  for(let roll in entry.data){
    html += `<tr>
              <td>${roll}</td>
              ${entry.data[roll].map(v=>`<td>${v}</td>`).join("")}
            </tr>`;
  }

  html += `</table>`;
});

document.getElementById("output").innerHTML = html;

function goBack(){
  window.location.href = "attendance_detection.html";
}

</script>

</body>
</html>
